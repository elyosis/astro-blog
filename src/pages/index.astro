---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostPreviewIndex from "../components/PostPreviewIndex.astro";
import classes from "../styles/pages/index.module.scss";

import { getCollection } from "astro:content";

const posts = (await getCollection("posts")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout>
	{
		posts.map((post) => (
			<PostPreviewIndex
				title={post.data.title}
				summary={post.data.summary}
				pubDate={post.data.pubDate}
				url={`/posts/${post.slug}`}
				heroImage={post.data.heroImage}
				tags={post.data.tags}
			/>
		))
	}
</BaseLayout>
